# PBS Net API

![Node.js](https://img.shields.io/badge/Node.js-18.x-green) ![Express.js](https://img.shields.io/badge/Express.js-4.x-blue) ![Supabase](https://img.shields.io/badge/Supabase-PostgreSQL-brightgreen) ![License](https://img.shields.io/badge/License-MIT-yellow)

ржПржЯрж┐ ржПржХржЯрж┐ RESTful API ржпрж╛ ржкрж▓рзНрж▓рзА ржмрж┐ржжрзНржпрзБрзО рж╕ржорж┐рждрж┐ (PBS) ржПрж░ ржЕржнрзНржпржирзНрждрж░рзАржг ржмрзНржпржмрж╣рж╛рж░ржХрж╛рж░рзАржжрзЗрж░ ржЬржирзНржп ржирзЛржЯ рждрзИрж░рж┐, рж╢рзЗржпрж╝рж╛рж░рж┐ржВ ржПржмржВ ржЕржирзБржорждрж┐ ржмрзНржпржмрж╕рзНржерж╛ржкржирж╛рж░ ржЬржирзНржп ржбрж┐ржЬрж╛ржЗржи ржХрж░рж╛ рж╣ржпрж╝рзЗржЫрзЗред

---

## ЁЯЪА ржлрж┐ржЪрж╛рж░рж╕ржорзВрж╣ (Features)

* **ржмрзНржпржмрж╣рж╛рж░ржХрж╛рж░рзА ржмрзНржпржмрж╕рзНржерж╛ржкржирж╛:**
    * ржЗржорзЗржЗрж▓/ржорзЛржмрж╛ржЗрж▓ ржиржорзНржмрж░ ржУ ржкрж╛рж╕ржУржпрж╝рж╛рж░рзНржб ржжрж┐рзЯрзЗ рж░рзЗржЬрж┐рж╕рзНржЯрзНрж░рзЗрж╢ржи ржУ рж▓ржЧржЗржиред
    * JWT (JSON Web Token) ржнрж┐рждрзНрждрж┐ржХ ржирж┐рж░рж╛ржкржж ржкрзНрж░ржорж╛ржгрзАржХрж░ржгред
    * ржкрж╛рж╕ржУржпрж╝рж╛рж░рзНржб рж░рж┐рж╕рзЗржЯ ржУ ржкрж░рж┐ржмрж░рзНрждржи ржХрж░рж╛рж░ рж╕рзБржмрж┐ржзрж╛ред
    * ржмрзНржпржмрж╣рж╛рж░ржХрж╛рж░рзАрж░ ржкрзНрж░рзЛржлрж╛ржЗрж▓ рждрзИрж░рж┐ ржПржмржВ ржЖржкржбрзЗржЯред
    * ржЕржирзНржп ржмрзНржпржмрж╣рж╛рж░ржХрж╛рж░рзАржХрзЗ ржорзЛржмрж╛ржЗрж▓ ржиржорзНржмрж░ ржмрж╛ ID ржжрж┐рзЯрзЗ ржЦрзЛржБржЬрж╛рж░ ржмрзНржпржмрж╕рзНржерж╛ред

* **ржирзЛржЯ ржмрзНржпржмрж╕рзНржерж╛ржкржирж╛:**
    * ржпрзЗржХрзЛржирзЛ рж▓ржЧржЗржи ржХрж░рж╛ ржмрзНржпржмрж╣рж╛рж░ржХрж╛рж░рзА ржирзЛржЯ рждрзИрж░рж┐ ржХрж░рждрзЗ ржкрж╛рж░рзЗржиред
    * ржкрзНрж░рждрж┐ржЯрж┐ ржирзЛржЯрзЗрж░ ржЬржирзНржп ржПржХржЯрж┐ ржЗржЙржирж┐ржХ рзо-ржбрж┐ржЬрж┐ржЯрзЗрж░ ржЖржЗржбрж┐ рждрзИрж░рж┐ рж╣рзЯред
    * ржирзЛржЯрзЗрж░ ржорзВрж▓ ржбрзЗржЯрж╛ JSON ржлрж░ржорзНржпрж╛ржЯрзЗ рж╕ржВрж░ржХрзНрж╖ржг ржХрж░рж╛ рж╣рзЯред

* **ржнрзВржорж┐ржХрж╛ ржУ ржЕржирзБржорждрж┐ (Roles & Permissions):**
    * ржкрзНрж░рждрж┐ржЯрж┐ ржирзЛржЯрзЗрж░ ржЬржирзНржп ржжрзБржЯрж┐ ржнрзВржорж┐ржХрж╛: **Admin** ржПржмржВ **Viewer**ред
    * ржирзЛржЯрзЗрж░ ржЕрзНржпрж╛ржбржорж┐ржи ржЕржирзНржп ржмрзНржпржмрж╣рж╛рж░ржХрж╛рж░рзАржХрзЗ ржирзЛржЯрзЗ ржпрзБржХрзНржд ржХрж░рждрзЗ, ржмрж╛ржж ржжрж┐рждрзЗ ржПржмржВ рждрж╛ржжрзЗрж░ ржнрзВржорж┐ржХрж╛ ржкрж░рж┐ржмрж░рзНрждржи ржХрж░рждрзЗ ржкрж╛рж░рзЗржиред
    * ржирзЛржЯрзЗрж░ рж╢рзЗрж╖ ржЕрзНржпрж╛ржбржорж┐ржиржХрзЗ ржмрж╛ржж ржжрзЗржУрзЯрж╛ ржпрж╛ржмрзЗ ржирж╛ред

* **ржбрзНржпрж╛рж╢ржмрзЛрж░рзНржб ржУ ржЗржирзНржЯрж╛рж░тАНрзНржпрж╛ржХрж╢ржи:**
    * ржмрзНржпржмрж╣рж╛рж░ржХрж╛рж░рзА рждрж╛рж░ ржЕржирзБржорждрж┐ ржерж╛ржХрж╛ рж╕ржорж╕рзНржд ржирзЛржЯрзЗрж░ рждрж╛рж▓рж┐ржХрж╛ ржжрзЗржЦрждрзЗ ржкрж╛рж░рзЗржиред
    * ржирж┐ржЬрзЗрж░ PBS-ржПрж░ ржЕржзрзАржирзЗ ржерж╛ржХрж╛ рж╕ржорж╕рзНржд ржирзЛржЯрзЗрж░ рждрж╛рж▓рж┐ржХрж╛ ржжрзЗржЦрж╛ ржпрж╛рзЯ (ржЕржирзБржорждрж┐ ржирж╛ ржерж╛ржХрж▓рзЗ ржорзВрж▓ ржбрзЗржЯрж╛ ржжрзЗржЦрж╛ ржпрж╛рзЯ ржирж╛)ред
    * ржпрзЗржХрзЛржирзЛ ржирзЛржЯрзЗ **Viewer** рж╣ржУрзЯрж╛рж░ ржЬржирзНржп ржЕржирзБрж░рзЛржз ржкрж╛ржарж╛ржирзЛрж░ рж╕рж┐рж╕рзНржЯрзЗржоред
    * ржирзЛржЯрзЗрж░ ржЕрзНржпрж╛ржбржорж┐ржи ржнрж┐ржЙржпрж╝рж╛рж░ рж░рж┐ржХрзЛржпрж╝рзЗрж╕рзНржЯ ржЧрзНрж░рж╣ржг ржмрж╛ ржкрзНрж░рждрзНржпрж╛ржЦрзНржпрж╛ржи ржХрж░рждрзЗ ржкрж╛рж░рзЗржиред

---

## ЁЯТ╗ ржмрзНржпржмрж╣рзГржд ржкрзНрж░ржпрзБржХрзНрждрж┐ (Technology Stack)

* **ржлрзНрж░рзЗржоржУржпрж╝рж╛рж░рзНржХ:** Node.js, Express.js
* **ржбрж╛ржЯрж╛ржмрзЗрж╕:** Supabase (PostgreSQL)
* **ржкрзНрж░ржорж╛ржгрзАржХрж░ржг:** JSON Web Token (JWT)
* **ржкрж╛рж╕ржУржпрж╝рж╛рж░рзНржб рж╣рзНржпрж╛рж╢рж┐ржВ:** Bcrypt.js
* **ржЗржорзЗржЗрж▓ рж╕рж╛рж░рзНржнрж┐рж╕:** Nodemailer

---

## ЁЯФз рж╕рзЗржЯржЖржк ржПржмржВ ржЗржирзНрж╕ржЯрж▓рзЗрж╢ржи (Setup and Installation)

ржкрзНрж░ржЬрзЗржХрзНржЯржЯрж┐ ржЖржкржирж╛рж░ рж▓рзЛржХрж╛рж▓ ржорзЗрж╢рж┐ржирзЗ ржЪрж╛рж▓рж╛ржирзЛрж░ ржЬржирзНржп ржирж┐ржЪрзЗрж░ ржзрж╛ржкржЧрзБрж▓рзЛ ржЕржирзБрж╕рж░ржг ржХрж░рзБржиред

### ржкрзВрж░рзНржмрж╢рж░рзНржд (Prerequisites)
* [Node.js](https://nodejs.org/) (v16 ржмрж╛ ржирждрзБржи)
* [Git](https://git-scm.com/)
* ржПржХржЯрж┐ [Supabase](https://supabase.com/) ржЕрзНржпрж╛ржХрж╛ржЙржирзНржЯ

### ржзрж╛ржкрж╕ржорзВрж╣

рзз. **рж░рж┐ржкрзЛржЬрж┐ржЯрж░рж┐ржЯрж┐ ржХрзНрж▓рзЛржи ржХрж░рзБржи:**
   ```bash
   git clone [https://github.com/your-username/pbs-net-api.git](https://github.com/your-username/pbs-net-api.git)
   cd pbs-net-api
   ```

рзи. **NPM ржкрзНржпрж╛ржХрзЗржЬржЧрзБрж▓рзЛ ржЗржирзНрж╕ржЯрж▓ ржХрж░рзБржи:**
   ```bash
   npm install
   ```

рзй. **Supabase рж╕рзЗржЯржЖржк:**
   * Supabase-ржП ржПржХржЯрж┐ ржирждрзБржи ржкрзНрж░ржЬрзЗржХрзНржЯ рждрзИрж░рж┐ ржХрж░рзБржиред
   * ржкрзНрж░ржЬрзЗржХрзНржЯрзЗрж░ **SQL Editor**-ржП ржЧрж┐рзЯрзЗ `schema.sql` ржлрж╛ржЗрж▓рзЗрж░ ржХрзЛржбржЯрж┐ рж░рж╛ржи ржХрж░рзЗ ржбрж╛ржЯрж╛ржмрзЗрж╕ ржЯрзЗржмрж┐рж▓ржЧрзБрж▓рзЛ рждрзИрж░рж┐ ржХрж░рзБржиред
   * ржЖржкржирж╛рж░ ржкрзНрж░ржЬрзЗржХрзНржЯрзЗрж░ **Settings > API** ржерзЗржХрзЗ `Project URL` ржПржмржВ `anon key` рж╕ржВржЧрзНрж░рж╣ ржХрж░рзБржиред

рзк. **ржПржиржнрж╛ржпрж╝рж░ржиржорзЗржирзНржЯ ржнрзЗрж░рж┐ржпрж╝рзЗржмрж▓ рж╕рзЗржЯржЖржк:**
   ржкрзНрж░ржЬрзЗржХрзНржЯрзЗрж░ ржорзВрж▓ ржлрзЛрж▓рзНржбрж╛рж░рзЗ `.env.example` ржлрж╛ржЗрж▓ржЯрж┐ржХрзЗ ржХржкрж┐ ржХрж░рзЗ `.env` ржирж╛ржорзЗ ржПржХржЯрж┐ ржирждрзБржи ржлрж╛ржЗрж▓ рждрзИрж░рж┐ ржХрж░рзБржиред ржПрж░ржкрж░ ржирж┐ржЪрзЗрж░ рждржерзНржпржЧрзБрж▓рзЛ ржкрзВрж░ржг ржХрж░рзБржи:

   ```env
   # Supabase Credentials
   SUPABASE_URL=YOUR_SUPABASE_PROJECT_URL
   SUPABASE_KEY=YOUR_SUPABASE_ANON_KEY

   # API Configuration
   JWT_SECRET=YOUR_SUPER_SECRET_AND_STRONG_JWT_KEY
   PORT=3000

   # Email Server (Gmail) Configuration
   EMAIL_USER=your-email@gmail.com
   EMAIL_PASS=your-16-character-gmail-app-password
   ```
   тЪая╕П **ржЧрзБрж░рзБрждрзНржмржкрзВрж░рзНржг:** `.gitignore` ржлрж╛ржЗрж▓рзЗ `.env` ржпрзБржХрзНржд ржХрж░рж╛ ржЖржЫрзЗ, рждрж╛ржЗ ржЖржкржирж╛рж░ ржЧрзЛржкржи ржХрзА ржХржЦржирзЛ GitHub-ржП ржЖржкрж▓рзЛржб рж╣ржмрзЗ ржирж╛ред

---

## тЦ╢я╕П ржЕрзНржпрж╛ржкрзНрж▓рж┐ржХрзЗрж╢ржи ржЪрж╛рж▓рж╛ржирзЛ (Running the Application)

ржЖржкржирж╛рж░ ржЯрж╛рж░рзНржорж┐ржирж╛рж▓рзЗ ржирж┐ржЪрзЗрж░ ржХржорж╛ржирзНржбржЯрж┐ рж░рж╛ржи ржХрж░рзБржи:
```bash
node server.js
```
рж╕рж╛рж░рзНржнрж╛рж░ржЯрж┐ ржбрж┐ржлрж▓рзНржЯржнрж╛ржмрзЗ `http://localhost:3000` ржкрзЛрж░рзНржЯрзЗ ржЪрж╛рж▓рзБ рж╣ржмрзЗред

---

## ЁЯФЧ ржПржкрж┐ржЖржЗ ржПржирзНржбржкржпрж╝рзЗржирзНржЯрж╕ржорзВрж╣ (API Endpoints)

ржПржЦрж╛ржирзЗ ржПржкрж┐ржЖржЗ-ржПрж░ ржкрзНрж░ржзрж╛ржи ржПржирзНржбржкржпрж╝рзЗржирзНржЯржЧрзБрж▓рзЛрж░ ржПржХржЯрж┐ рж╕ржВржХрзНрж╖рж┐ржкрзНржд рждрж╛рж▓рж┐ржХрж╛ ржжрзЗржУрзЯрж╛ рж╣рж▓рзЛред ржмрж┐рж╕рзНрждрж╛рж░рж┐ржд рждржерзНржпрзЗрж░ ржЬржирзНржп `documentation.html` ржлрж╛ржЗрж▓ржЯрж┐ ржжрзЗржЦрзБржиред

| Endpoint                        | Method | ржмрж┐ржмрж░ржг                                   | Access  |
| ------------------------------- | :----: | ---------------------------------------- | :-----: |
| **ржмрзНржпржмрж╣рж╛рж░ржХрж╛рж░рзА ржУ ржкрзНрж░ржорж╛ржгрзАржХрж░ржг** |        |                                          |         |
| `/auth/register`                | `POST` | ржирждрзБржи ржмрзНржпржмрж╣рж╛рж░ржХрж╛рж░рзА рж░рзЗржЬрж┐рж╕рзНржЯрж╛рж░ ржХрж░рж╛             | Public  |
| `/auth/login`                   | `POST` | ржмрзНржпржмрж╣рж╛рж░ржХрж╛рж░рзАржХрзЗ рж▓ржЧржЗржи ржХрж░рж╛ржирзЛ                 | Public  |
| `/auth/forgot-password`         | `POST` | ржкрж╛рж╕ржУржпрж╝рж╛рж░рзНржб рж░рж┐рж╕рзЗржЯ рж▓рж┐ржЩрзНржХ ржкрж╛ржарж╛ржирзЛ            | Public  |
| `/users/password`               | `PUT`  | рж▓ржЧржЗржи ржХрж░рж╛ ржмрзНржпржмрж╣рж╛рж░ржХрж╛рж░рзАрж░ ржкрж╛рж╕ржУржпрж╝рж╛рж░рзНржб ржкрж░рж┐ржмрж░рзНрждржи | Private |
| `/users/profile`                | `GET`  | ржирж┐ржЬрзЗрж░ ржкрзНрж░рзЛржлрж╛ржЗрж▓ ржжрзЗржЦрж╛                     | Private |
| `/users/profile`                | `PUT`  | ржирж┐ржЬрзЗрж░ ржкрзНрж░рзЛржлрж╛ржЗрж▓ ржЖржкржбрзЗржЯ ржХрж░рж╛                | Private |
| `/users/search`                 | `GET`  | ржорзЛржмрж╛ржЗрж▓ ржиржорзНржмрж░ ржжрж┐рзЯрзЗ ржмрзНржпржмрж╣рж╛рж░ржХрж╛рж░рзА ржЦрзЛржБржЬрж╛     | Private |
| `/users/:id`                    | `GET`  | User ID ржжрж┐рзЯрзЗ ржмрзНржпржмрж╣рж╛рж░ржХрж╛рж░рзА ржЦрзЛржБржЬрж╛           | Private |
| **ржирзЛржЯ ржмрзНржпржмрж╕рзНржерж╛ржкржирж╛** |        |                                          |         |
| `/notes`                        | `POST` | ржирждрзБржи ржирзЛржЯ рждрзИрж░рж┐ ржХрж░рж╛                       | Private |
| `/notes/:id`                    | `GET`  | ржирж┐рж░рзНржжрж┐рж╖рзНржЯ ржирзЛржЯрзЗрж░ ржмрж┐ржмрж░ржг ржжрзЗржЦрж╛              | Private |
| `/notes/:id`                    | `PUT`  | ржирж┐рж░рзНржжрж┐рж╖рзНржЯ ржирзЛржЯ ржЖржкржбрзЗржЯ ржХрж░рж╛                  | Private |
| `/notes/:id`                    | `DELETE`| ржирж┐рж░рзНржжрж┐рж╖рзНржЯ ржирзЛржЯ ржбрж┐рж▓рж┐ржЯ ржХрж░рж╛                   | Private |
| **ржнрзВржорж┐ржХрж╛ ржУ ржЕржирзБржорждрж┐** |        |                                          |         |
| `/notes/:id/permissions`        | `POST` | ржирзЛржЯрзЗ ржмрзНржпржмрж╣рж╛рж░ржХрж╛рж░рзАржХрзЗ ржпрзБржХрзНржд ржХрж░рж╛              | Private |
| `/notes/:id/permissions`        | `DELETE`| ржирзЛржЯ ржерзЗржХрзЗ ржмрзНржпржмрж╣рж╛рж░ржХрж╛рж░рзАржХрзЗ ржмрж╛ржж ржжрзЗржУрзЯрж╛         | Private |
| **ржбрзНржпрж╛рж╢ржмрзЛрж░рзНржб ржУ ржЗржирзНржЯрж╛рж░тАНрзНржпрж╛ржХрж╢ржи** |        |                                          |         |
| `/dashboard/my-notes`           | `GET`  | ржЖржорж╛рж░ ржирзЛржЯрзЗрж░ рждрж╛рж▓рж┐ржХрж╛ ржжрзЗржЦрж╛                  | Private |
| `/dashboard/pbs-notes`          | `GET`  | PBS-ржПрж░ рж╕ржм ржирзЛржЯ ржжрзЗржЦрж╛                      | Private |
| **ржнрж┐ржЙржпрж╝рж╛рж░ рж░рж┐ржХрзЛржпрж╝рзЗрж╕рзНржЯ рж╕рж┐рж╕рзНржЯрзЗржо** |        |                                          |         |
| `/notes/:id/request-access`     | `POST` | ржнрж┐ржЙржпрж╝рж╛рж░ рж╣ржУржпрж╝рж╛рж░ ржЕржирзБрж░рзЛржз ржкрж╛ржарж╛ржирзЛ            | Private |
| `/notes/:id/requests`           | `GET`  | ржкрзЗржирзНржбрж┐ржВ рж░рж┐ржХрзЛржпрж╝рзЗрж╕рзНржЯ ржжрзЗржЦрж╛                  | Private |
| `/notes/requests/:requestId`    | `PUT`  | рж░рж┐ржХрзЛржпрж╝рзЗрж╕рзНржЯ ржЧрзНрж░рж╣ржг ржмрж╛ ржкрзНрж░рждрзНржпрж╛ржЦрзНржпрж╛ржи ржХрж░рж╛       | Private |

---

## ЁЯУЬ рж▓рж╛ржЗрж╕рзЗржирзНрж╕ (License)

ржПржЗ ржкрзНрж░ржЬрзЗржХрзНржЯржЯрж┐ MIT рж▓рж╛ржЗрж╕рзЗржирзНрж╕рзЗрж░ ржЕржзрзАржирзЗ ржкрзНрж░ржХрж╛рж╢рж┐рждред ржмрж┐рж╕рзНрждрж╛рж░рж┐ржд ржЬрж╛ржирждрзЗ `LICENSE` ржлрж╛ржЗрж▓ржЯрж┐ ржжрзЗржЦрзБржиред